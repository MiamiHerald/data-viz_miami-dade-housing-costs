"use strict"
function fixPosition(){return w>=mobile?[25.82,-79.85]:[25.5,-80.2]}function fixZoom(){return w>mobile?9.5:8.75}function controlZoom(){return w>mobile?!0:!1}function defaultLayerColor(e,o){return{fillColor:"#ccc",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function getDefaultOpacity(e){return e>1?.7:0}function getDefaultBorder(e){return e>1?"white":"none"}function getDefaultHouseColor(e){return e>=601801&&3229e3>=e?"#1b7837":e>=425551&&601800>=e?"#5aae61":e>=319526&&425550>=e?"#a6dba0":e>=284101&&319525>=e?"#d9f0d3":e>=237051&&284100>=e?"#e7d4e8":e>=200751&&237050>=e?"#c2a5cf":e>=157876&&200750>=e?"#9970ab":e>=1&&157875>=e?"#762a83":"#fff"}function defaultHouseStyle(e,o){return{fillColor:getDefaultHouseColor(e.properties.housePriceFifteen),weight:2,opacity:1,color:getDefaultBorder(e.properties.housePriceFifteen),dashArray:"3",fillOpacity:getDefaultOpacity(e.properties.housePriceFifteen)}}function getDefaultCondoColor(e){return e>=298701&&394500>=e?"#1b7837":e>=214401&&298700>=e?"#5aae61":e>=152051&&214400>=e?"#a6dba0":e>=138601&&152050>=e?"#d9f0d3":e>=100601&&138600>=e?"#e7d4e8":e>=100601&&100600>=e?"#c2a5cf":e>=85826&&100600>=e?"#9970ab":e>=1&&85825>=e?"#762a83":"#fff"}function defaultCondoStyle(e,o){return{fillColor:getDefaultCondoColor(e.properties.condoPriceFifteen),weight:2,opacity:1,color:getDefaultBorder(e.properties.condoPriceFifteen),dashArray:"3",fillOpacity:getDefaultOpacity(e.properties.condoPriceFifteen)}}function getDefaultPercentOpacity(e){return e>0?.7:0}function getDefaultPercentBorder(e){return e>0?"white":"none"}function getDefaultHousePercentColor(e){return e>=.11&&.27>=e?"#08519c":e>=.08&&.11>e?"#3182bd":e>=.04&&.08>e?"#6baed6":e>=0&&.04>e?"#bdd7e7":"#fff"}function defaultHousePercentStyle(e,o){return{fillColor:getDefaultHousePercentColor(e.properties.housePercent),weight:2,opacity:1,color:getDefaultPercentBorder(e.properties.housePercent),dashArray:"3",fillOpacity:getDefaultPercentOpacity(e.properties.housePercent)}}function getDefaultCondoPercentColor(e){return e>=.08&&.25>=e?"#08519c":e>=.057&&.079>=e?"#3182bd":e>=0&&.056>=e?"#6baed6":e>=-.03&&-.01>=e?"#bdd7e7":"#fff"}function defaultCondoPercentStyle(e,o){return{fillColor:getDefaultCondoPercentColor(e.properties.condoPercent),weight:2,opacity:1,color:getDefaultPercentBorder(e.properties.condoPercent),dashArray:"3",fillOpacity:getDefaultPercentOpacity(e.properties.condoPercent)}}function getDefaultCrimeOpacity(e){return e>1?.7:0}function getDefaultCrimeBorder(e){return e>1?"white":"none"}function getDefaultCrimeColor(e){return e>200?"#de2d26":e>100&&200>e?"#fc9272":e>0&&100>e?"#fee0d2":"#fff"}function defaultCrimeStyle(e,o){return{fillColor:getDefaultCrimeColor(e.properties.crime),weight:2,opacity:getDefaultBorder(e.properties.crime),color:"white",dashArray:"3",fillOpacity:getDefaultOpacity(e.properties.crime)}}function getDefaultSchoolOpacity(e){return e>1?.7:0}function getDefaultSchoolBorder(e){return e>1?"white":"none"}function getDefaultSchoolColor(e){return e>=4?"#54278f":e>=3&&3.9>=e?"#756bb1":e>=2&&2.9>=e?"#9e9ac8":e>1&&1.9>=e?"#cbc9e2":e>.1&&.9>=e?"#f2f0f7":"#fff"}function defaultSchoolStyle(e,o){return{fillColor:getDefaultSchoolColor(e.properties.schoolGrade),weight:2,opacity:1,color:getDefaultSchoolBorder(e.properties.schoolGrade),dashArray:"3",fillOpacity:getDefaultSchoolOpacity(e.properties.schoolGrade)}}function getPriceOpacity(e){return income>=e?.7:0}function getPriceBorder(e){return income>=e?"white":"none"}function getHouseColor(e){if(e>=601801&&3229e3>=e){if(income>=e)return"#1b7837"}else if(e>=425551&&601800>=e){if(income>=e)return"#5aae61"}else if(e>=319526&&425550>=e){if(income>=e)return"#a6dba0"}else if(e>=284101&&319525>=e){if(income>=e)return"#d9f0d3"}else if(e>=237051&&284100>=e){if(income>=e)return"#e7d4e8"}else if(e>=200751&&237050>=e){if(income>=e)return"#c2a5cf"}else if(e>=157876&&200750>=e){if(income>=e)return"#9970ab"}else{if(!(e>=1&&157875>=e))return"#fff"
if(income>=e)return"#762a83"}}function houseStyle(e,o){return{fillColor:getHouseColor(e.properties.housePriceFifteen),weight:2,opacity:1,color:getPriceBorder(e.properties.housePriceFifteen),dashArray:"3",fillOpacity:getPriceOpacity(e.properties.housePriceFifteen)}}function getCondoColor(e){if(e>=298701&&394500>=e){if(income>=e)return"#1b7837"}else if(e>=214401&&298700>=e){if(income>=e)return"#5aae61"}else if(e>=152051&&214400>=e){if(income>=e)return"#a6dba0"}else if(e>=138601&&152050>=e){if(income>=e)return"#d9f0d3"}else if(e>=100601&&138600>=e){if(income>=e)return"#e7d4e8"}else if(e>=100601&&100600>=e){if(income>=e)return"#c2a5cf"}else if(e>=85826&&100600>=e){if(income>=e)return"#9970ab"}else{if(!(e>=1&&85825>=e))return"#fff"
if(income>=e)return"#762a83"}}function condoStyle(e,o){return{fillColor:getCondoColor(e.properties.condoPriceFifteen),weight:2,opacity:1,color:getPriceBorder(e.properties.condoPriceFifteen),dashArray:"3",fillOpacity:getPriceOpacity(e.properties.condoPriceFifteen)}}function getPercentOpacity(e,o){return income>=e&&o>0?.7:0}function getPercentBorder(e,o){return income>=e&&o>0?"white":"none"}function getHousePercentColor(e,o){return income>=e&&o>=.27?"#08519c":income>=e&&o>=.12&&.26>=o?"#3182bd":income>=e&&o>=.084&&.11>=o?"#6baed6":income>=e&&o>0&&.083>=o?"#bdd7e7":void 0}function housePercentStyle(e,o){return{fillColor:getHousePercentColor(e.properties.housePriceFifteen,e.properties.housePercent),weight:2,opacity:1,color:getPercentBorder(e.properties.housePriceFifteen,e.properties.housePercent),dashArray:"3",fillOpacity:getPercentOpacity(e.properties.housePriceFifteen,e.properties.housePercent)}}function getCondoPercentColor(e,o){return income>=e&&o>=.25?"#08519c":income>=e&&o>=.08&&.24>=o?"#3182bd":income>=e&&o>=.06&&.08>=o?"#6baed6":income>=e&&o>=-.03&&.06>=o?"#9ecae1":"#fff"}function condoPercentStyle(e,o){return{fillColor:getCondoPercentColor(e.properties.condoPriceFifteen,e.properties.condoPercent),weight:2,opacity:1,color:getPercentBorder(e.properties.condoPriceFifteen,e.properties.condoPercent),dashArray:"3",fillOpacity:getPercentOpacity(e.properties.condoPriceFifteen,e.properties.condoPercent)}}function getBuiltCrimeOpacity(e,o,t){var r=$(".house:checkbox"),c=$(".condo:checkbox"),i=r.is(":checked"),l=c.is(":checked")
return i===!0&&l===!1?income>=e&&t>0?.7:0:i===!1&&l===!0?income>=o&&t>0?.7:0:void 0}function getBuiltCrimeBorder(e,o,t){var r=$(".house:checkbox"),c=$(".condo:checkbox"),i=r.is(":checked"),l=c.is(":checked")
return i===!0&&l===!1?income>=e&&t>0?"white":"none":i===!1&&l===!0?income>=o&&t>0?"white":"none":void 0}function getCrimeColor(e,o,t){var r=$(".income-box").val(),c=$(".house:checkbox"),i=$(".condo:checkbox"),l=c.is(":checked"),n=i.is(":checked"),a=""===r
if(l===!0&&n===!1&&a===!1){if(income>=o&&e>200)return"#de2d26"
if(income>=o&&e>100&&200>e)return"#fc9272"
if(income>=o&&e>0&&100>e)return"#fee0d2"}else if(l===!1&&n===!0&&a===!1){if(income>=t&&e>200)return"#de2d26"
if(income>=t&&e>100&&200>e)return"#fc9272"
if(income>=t&&e>0&&100>e)return"#fee0d2"}}function crimeStyle(e,o){return{fillColor:getCrimeColor(e.properties.crime,e.properties.housePriceFifteen,e.properties.condoPriceFifteen),weight:2,opacity:1,color:getBuiltCrimeBorder(e.properties.housePriceFifteen,e.properties.condoPriceFifteen,e.properties.crime),dashArray:"3",fillOpacity:getBuiltCrimeOpacity(e.properties.housePriceFifteen,e.properties.condoPriceFifteen,e.properties.crime)}}function getBuiltSchoolOpacity(e,o,t){var r=$(".house:checkbox"),c=$(".condo:checkbox"),i=r.is(":checked"),l=c.is(":checked")
return i===!0&&l===!1?income>=o&&e>0?.7:0:i===!1&&l===!0?income>=t&&e>0?.7:0:void 0}function getBuiltSchoolBorder(e,o,t){var r=$(".house:checkbox"),c=$(".condo:checkbox"),i=r.is(":checked"),l=c.is(":checked")
return i===!0&&l===!1?income>=o&&e>0?"white":"none":i===!1&&l===!0?income>=t&&e>0?"white":"none":void 0}function getSchoolColor(e,o,t){var r=$(".income-box").val(),c=$(".house:checkbox"),i=$(".condo:checkbox"),l=c.is(":checked"),n=i.is(":checked"),a=""===r
if(l===!0&&n===!1&&a===!1){if(income>=o&&4===e)return"#54278f"
if(income>=o&&e>=3&&3.9>=e)return"#756bb1"
if(income>=o&&e>=2&&2.9>=e)return"#9e9ac8"
if(income>=o&&e>1&&1.9>=e)return"#cbc9e2"
if(income>=o&&e>=.1&&.9>=e)return"#f2f0f7"}else if(l===!1&&n===!0&&a===!1){if(income>=t&&4===e)return"#54278f"
if(income>=t&&e>=3&&3.9>=e)return"#756bb1"
if(income>=t&&e>=2&&2.9>=e)return"#9e9ac8"
if(income>=t&&e>1&&1.9>=e)return"#cbc9e2"
if(income>=t&&e>=.1&&.9>=e)return"#f2f0f7"}}function schoolStyle(e,o){return{fillColor:getSchoolColor(e.properties.schoolGrade,e.properties.housePriceFifteen,e.properties.condoPriceFifteen),weight:2,opacity:1,color:getBuiltSchoolBorder(e.properties.schoolGrade,e.properties.housePriceFifteen,e.properties.condoPriceFifteen),dashArray:"3",fillOpacity:getBuiltSchoolOpacity(e.properties.schoolGrade,e.properties.housePriceFifteen,e.properties.condoPriceFifteen)}}function getPos(e){var o=$("#map-container").width(),t=$("#map-container").height(),r=e.pageX+20,c=e.pageY-150,i=0,l=0
i=o>r?r-150:r-($("#hover-box").outerWidth(!0)+100),l=c>t?c-$("#hover-box").outerHeight(!0)-375:c,$("#hover-box").css({left:i,top:l+150})}function initHover(){$("#hover-box").show(),$(document).bind("mousemove",getPos)}function endHover(){$("#hover-box").hide(),$(document).unbind("mousemove",getPos)}function getIncome(e){var o=$(".income:checkbox"),t=$(".savings:checkbox"),r=o.is(":checked"),c=t.is(":checked")
if(r===!0&&c===!1){var i=3.5*numeral().unformat(e)
return i}if(r===!1&&c===!0){var i=numeral().unformat(e)
return i}$(".income").html("$"+e)}function numberChange(e){return"No data"===e?"No data":"$"+numeral(e).format("0,0")}function percentChange(e){if(1>e&&e>=0){var o=Math.floor(100*e)
return o>0?"+"+o+"%":"No data"===e?"No data":0===o?"0%":o+"%"}var o=Math.floor(e)
return o>0?"+"+o+"%":"No data"===e?"No data":0===o?"0%":o+"%"}function flagError(){$(".error").slideDown("fast"),$(".alert").html("<i class='fa fa-info-circle'></i> Error: Please enter a valid number.")}function flagSelectionError(){$(".error").slideDown("fast"),$(".alert").html("<i class='fa fa-info-circle'></i> Error: Please choose house or condo.")}function flagMoneyError(){$(".error").slideDown("fast"),$(".alert").html("<i class='fa fa-info-circle'></i> Error: Please choose income or price.")}function removeError(){$(".error").slideUp("fast")}function checkInput(e){var o=$(".income-box").val(),t=$(".house:checkbox"),r=$(".condo:checkbox"),c=$(".income:checkbox"),i=$(".savings:checkbox"),l=isNaN(e)||""===o,n=t.is(":checked"),a=r.is(":checked"),s=c.is(":checked"),d=i.is(":checked")
r.attr("disabled",!0),t.attr("disabled",!0),l!==!1||n!==!0||a!==!1||s!==!0&&d!==!0?l===!0&&n===!1&&a===!1&&s===!1&&d===!1?(r.attr("disabled",!1),t.attr("disabled",!1),flagSelectionError()):l!==!0||n!==!0&&a!==!0||s!==!0&&d!==!0?(l!==!1||n!==!0&&a!==!0||s!==!1||d!==!1)&&(l!==!0||n!==!0&&a!==!0||s!==!1||d!==!1)?(l!==!1||n!==!1||a!==!1||s!==!0&&d!==!0)&&(l!==!0||n!==!1||a!==!1||s!==!0&&d!==!0)?l!==!1||n!==!1||a!==!0||s!==!0&&d!==!0||(buildCondoMap(e),removeError()):flagSelectionError():flagMoneyError():flagError():(buildHouseMap(e),removeError())
var e=getIncome(o)
return e}function buildKey(e){if($(".legend-block").remove(),"price"===e){for(var o=["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],t=0;t<o.length;t++)$(".key").append("<div class='legend-block' style='color:"+o[t]+"'</div>")
$(".legend-block").css("width","12.5%")}else if("percent"===e){for(var r=["#bdd7e7","#6baed6","#3182bd","#08519c"],t=0;t<r.length;t++)$(".key").append("<div class='legend-block' style='color:"+r[t]+"'</div>")
}else if("crime"===e){for(var c=["#fee0d2","#fc9272","#de2d26"],t=0;t<c.length;t++)$(".key").append("<div class='legend-block' style='color:"+c[t]+"'</div>")
$(".legend-block").css("width","33%")}else for(var i=["#54278f","#756bb1","#9e9ac8","#cbc9e2","#f2f0f7"],t=0;t<i.length;t++)$(".key").append("<div class='legend-block' style='color:"+i[t]+"'</div>"),$(".legend-block").css("width","20%")}function showExplainer(){$(".explainer").slideDown("fast").find("span").each(function(){$(this).css({color:"#006d2c","font-weight":"bold"})}),$("#button-container").slideUp("fast"),$("#input-container").slideUp("fast")}function hideExplainer(){$(".explainer").slideUp("fast"),$("#button-container").slideDown("fast"),$("#input-container").slideDown("fast")}function clearDefaultLayers(){map.removeLayer($defaultLayer),map.removeLayer($defaultHouseLayer),map.removeLayer($defaultCondoLayer),map.removeLayer($defaultPercentHouseLayer),map.removeLayer($defaultPercentCondoLayer),map.removeLayer($defaultCrimeLayer),map.removeLayer($defaultSchoolLayer)}function clearAllLayers(){map.removeLayer($houseLayer),map.removeLayer($condoLayer),map.removeLayer($percentCondoLayer),map.removeLayer($percentHouseLayer),map.removeLayer($crimeLayer),map.removeLayer($schoolLayer),map.removeLayer($defaultLayer),map.removeLayer($defaultHouseLayer),map.removeLayer($defaultCondoLayer),map.removeLayer($defaultPercentHouseLayer),map.removeLayer($defaultPercentCondoLayer),map.removeLayer($defaultCrimeLayer),map.removeLayer($defaultSchoolLayer)}function writeHoverBox(e,o){initHover()
var t=parseInt(o.feature.properties.zipcode),r=o.feature.properties.cities,c=o.feature.properties.housePriceFourteen,i=o.feature.properties.housePriceFifteen,l=o.feature.properties.housePercent,n=o.feature.properties.condoPriceFourteen,a=o.feature.properties.condoPriceFifteen,s=o.feature.properties.condoPercent,d=o.feature.properties.school,f=o.feature.properties.neighborhoods,h=o.feature.properties.crime,u=o.feature.properties.schoolGrade,p=$(".crime-rate"),m=$("#school-list")
"No data"===n?$(".condo-price-fourteen").css("color","#ccc"):$(".condo-price-fourteen").css("color","black"),"No data"===a?$(".condo-price-fifteen").css("color","#ccc"):$(".condo-price-fifteen").css("color","black"),"No data"===c?$(".house-price-fourteen").css("color","#ccc"):$(".house-price-fourteen").css("color","black"),"No data"===i?$(".house-price-fifteen").css("color","#ccc"):$(".house-price-fifteen").css("color","black"),s>0?$(".condo-percent").css("color","green"):0>s?$(".condo-percent").css("color","red"):0===s?$(".condo-percent").css("color","black"):$(".condo-percent").css("color","#ccc"),l>0?$(".house-percent").css("color","green"):0>l?$(".house-percent").css("color","red"):0===l?$(".house-percent").css("color","black"):$(".house-percent").css("color","#ccc"),$(".zip-code").html(t),$(".city").html(r),$(".house-price-fourteen").html(numberChange(c)),$(".house-price-fifteen").html(numberChange(i)),$(".house-percent").html(percentChange(l)),$(".condo-price-fourteen").html(numberChange(n)),$(".condo-price-fifteen").html(numberChange(a)),$(".condo-percent").html(percentChange(s)),$(".hoods").html(f),h>0&&100>h?$(".crime-rate").css({background:"#fee0d2",color:"#333"}).html("Low crime"):h>100&&200>h?$(".crime-rate").css({background:"#fc9272",color:"#000"}).html("Medium crime"):h>200?$(".crime-rate").css({background:"#de2d26",color:"#fff"}).html("High crime"):$(".crime-rate").css({background:"#ccc",color:"#fff"}).html("No crime data")
var y=843,g=window.innerWidth
if(y>g){if($(".school-table").hide(),"No data"===u)$(".average-grade").html("no grade available")
else{for(var b=0,v=0;v<d.length;v++)b++
0===b||b>1?$(".school-number").html(b+" schools"):1===b&&$(".school-number").html(b+" school")}u>=4?$(".average-grade").html("A"):u>=3&&4>u?$(".average-grade").html("B"):u>=2&&3>u?$(".average-grade").html("C"):u>=1&&2>u?$(".average-grade").html("D"):u>=0&&1>u?$(".average-grade").html("F"):($(".average-grade").html("no grade available"),$(".school-number").html("0 schools")),$("#hover-box").on("click",".hover-box-close",function(e){$("#hover-box").hide()})}else if("No data"===d)$(".no-school").show(),$(".school-table").hide()
else{for(var v=0;v<d.length;v++)$(".no-school").hide(),$(".school-head").after("<tr class='schools-row'><td class='name'>"+d[v].name+"</td><td>"+d[v].grade2015+"</td><td>"+d[v].grade2014+"</td><td>"+d[v].grade2013+"</td></tr>")
$(".school-table").show()}p.show(),m.show()}function onEachFeature(e,o){o.on({mouseover:function(o){var t=o.target
t.setStyle({color:"#666"}),t.bringToFront()
var r=843,c=window.innerWidth
c>r&&writeHoverBox(e,t)},mouseout:function(e){var o=e.target
o.setStyle({color:"#fff"}),endHover(),$(".schools-row").empty()},click:function(t){var r=843,c=window.innerWidth
r>c&&($("#hover-box").css({margin:"auto",position:"absolute",top:0,left:0,bottom:"23%",right:0,height:"245px",width:"275px"}),writeHoverBox(e,o))},tap:function(t){var r=843,c=window.innerWidth
r>c&&($("#hover-box").css({margin:"auto",position:"absolute",top:0,left:0,bottom:"23%",right:0,height:"245px",width:"275px"}),writeHoverBox(e,o))}})}function setDefaultMap(){buildDefaultHouse()}function buildDefaultLayer(){$("#house-price").css({"float":"left",width:"50%","border-right":"1px dashed #ccc"}),$("#condo-price").css({"float":"left",width:"50%"}),$("#interface-container").slideUp("fast"),$("#map-info").css("bottom","20%"),$(".income:checkbox").removeAttr("checked"),$(".savings:checkbox").removeAttr("checked"),clearDefaultLayers(),map.addLayer($defaultLayer)}function buildDefaultHouse(){$(".price-select").addClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$("#interface-container").slideDown("fast"),$("#map-info").css("bottom","26%")
var e="price",o=$(".house:checkbox"),t=o.is(":checked")
buildKey(e),$(".housing-type").html("Median value of single-family homes").css({color:"#006d2c","font-weight":"bold"}),$(".housing-explainer").html(" in South Florida."),$(".percent-year").css("display","none"),t===!1?($("#house-price").css({"float":"left",width:"50%","border-right":"1px dashed #ccc","border-right-style":"dashed"}),$("#condo-price").css("display","block")):($("#house-price").css({"float":"none",border:"none",width:"100%"}),$("#condo-price").css("display","none")),$(".label-left").html("Less Expensive").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("More Expensive").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),clearDefaultLayers(),map.addLayer($defaultHouseLayer)}function buildDefaultCondo(){$(".price-select").addClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
var e="price"
buildKey(e),$(".housing-type").html("Median value of condos and townhouses").css({color:"#006d2c","font-weight":"bold"}),$(".housing-explainer").html(" in South Florida."),$(".percent-year").css("display","none"),$(".label-left").html("Less Expensive").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("More Expensive").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),clearDefaultLayers(),map.addLayer($defaultCondoLayer)}function buildDefaultPercentHouse(){$(".percent-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
var e="percent",o=$(".house:checkbox"),t=o.is(":checked")
buildKey(e),t===!1?($("#house-price").css({"float":"left",width:"50%","border-right":"1px dashed #ccc","border-right-style":"dashed"}),$("#condo-price").css("display","block")):($("#house-price").css({"float":"none",border:"none",width:"100%"}),$("#condo-price").css("display","none")),$(".housing-type").html("Value change of single-family homes").css({color:"#08519c","font-weight":"bold"}),$(".housing-explainer").html(" in South Florida"),$(".percent-year").css("display","inline"),$(".label-left").html("1%").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("28%").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),clearDefaultLayers(),map.addLayer($defaultPercentHouseLayer)}function buildDefaultPercentCondo(){$(".percent-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
var e="percent",o=$(".condo:checkbox"),t=o.is(":checked")
buildKey(e),t===!1?($("#condo-price").css({"float":"right",width:"50%",border:"none"}),$("#house-price").css("display","block")):($("#condo-price").css({"float":"none",border:"none",width:"100%"}),$("#house-price").css("display","none")),$(".housing-type").html("Value change of condos and townhouses").css({color:"#08519c","font-weight":"bold"}),$(".housing-explainer").html(" in South Florida"),$(".percent-year").css("display","inline"),$(".label-left").html("1%").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("25%").css({width:"50%","text-align":"right"}),clearDefaultLayers(),map.addLayer($defaultPercentCondoLayer)}function buildDefaultCrime(){$(".crime-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
var e="crime"
buildKey(e),$(".label-left").html("Low").css({width:"33%","text-align":"left"}),$(".label-middle").html("Average").css({display:"inline-block","text-align":"center",width:"33%"}),$(".label-right").html("High").css({width:"33%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),$(".housing-type").html("Crime rates ").css({color:"#a50f15","font-weight":"bold"}),$(".housing-explainer").html(" by ZIP code across South Florida."),$(".percent-year").css("display","none"),clearDefaultLayers(),map.addLayer($defaultCrimeLayer)}function buildDefaultSchool(){$(".school-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
var e="school"
buildKey(e),$(".housing").html("School rates").css({color:"#54278f","font-weight":"bold"}),$(".label-left").css({width:"20%","text-align":"center"}).html("A"),$(".b-grade").css({width:"20%",display:"inline-block"}).html("B"),$(".label-middle").css({width:"20%",display:"inline-block"}).html("C"),$(".d-grade").css({width:"20%",display:"inline-block"}).html("D"),$(".label-right").css({width:"20%","text-align":"center"}).html("F"),$(".housing-type").html("Average school grade ").css({color:"#54278f","font-weight":"bold"}),$(".housing-explainer").html(" determined by the Florida Department of Education."),$(".percent-year").css("display","none"),clearDefaultLayers(),map.addLayer($defaultSchoolLayer)}function buildHouseMap(){var e="price",o=$(".income-box").val(),t=getIncome(o)
console.log(t),$(".income-button").attr("disabled","disabled"),$(".price-select").addClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%"),d3.csv("../affordable-homes/js/libs/data/zipcodes.csv",function(e){var o=0
e.forEach(function(e){return t>=e.housePrice?o++:void 0}),o>=1&&$(".no-data").hide(),$(".housing").html("house"),$(".zip-count").html(o)}),$(".money").html("$"+numeral(t).format("0,0")),$("#interface-container").slideDown("400"),$(".key-holder").css("display","block"),$(".housing-type").html("Median value single-family houses ").css({color:"#006d2c","font-weight":"bold"}),$(".housing-explainer").html("in South Florida."),$(".percent-year").css("display","none"),$(".label-left").html("Less expensive").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("More expensive").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),buildKey(e),showExplainer(),clearAllLayers(),map.addLayer($houseLayer)}function buildCondoMap(){var e="price",o=$(".income-box").val(),t=getIncome(o)
$(".income-button").attr("disabled","disabled"),$(".percent-select").removeClass("selected-interface"),$(".price-select").addClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$(".key-holder").css("display","block"),$(".housing-type").html("Median value of condos and townhouses").css({color:"#006d2c","font-weight":"bold"}),$(".housing-explainer").html(" in South Florida."),$(".percent-year").css("display","none"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%"),$(".label-left").html("Less expensive").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("More expensive").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),d3.csv("../affordable-homes/js/libs/data/zipcodes.csv",function(e){var o=0
e.forEach(function(e){return t>=e.condoPrice?o++:void 0}),o>=1&&$(".no-data").hide(),$("#interface-container").slideDown("400"),$(".income").html("$"+numeral(t).format("0,0")),$(".housing").html("condo or townhouse"),$(".zip-count").html(o),$(".money").html("$"+numeral(t).format("0,0"))}),buildKey(e),clearAllLayers(),showExplainer(),map.addLayer($condoLayer)}function buildHousePercentMap(){var e=["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"]
$(".income-button").attr("disabled","disabled"),$(".percent-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".key-holder").css("display","block"),$(".legend-block").remove(),$(".housing-type").html("Value change ").css({color:"#08519c","font-weight":"bold"}),$(".housing-explainer").html(" of single-family houses since 2014 in the ZIP codes you can afford."),$(".percent-year").css("display","none"),$(".label-left").html("1%").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("28%").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
for(var o=0;o<e.length;o++)$(".key").append("<div class='legend-block' style='border-color:"+e[o]+"'</div>")
showExplainer(),clearAllLayers(),map.addLayer($percentHouseLayer)}function buildCondoPercentMap(){var e=["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"]
$(".income-button").attr("disabled","disabled"),$(".percent-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".school-select").removeClass("selected-interface"),$(".crime-select").removeClass("selected-interface"),$(".key-holder").css("display","block"),$(".legend-block").remove(),$(".housing-type").html("Price change ").css({color:"#08519c","font-weight":"bold"}),$(".housing-explainer").html(" for condos and townhouses since 2014 in the ZIP codes you can afford."),$(".percent-year").css("display","none"),$(".label-left").html("1%").css({width:"50%","text-align":"left"}),$(".label-middle").empty().css("display","none"),$(".label-right").html("25%").css({width:"50%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
for(var o=0;o<e.length;o++)$(".key").append("<div class='legend-block' style='border-color:"+e[o]+"'</div>")
clearAllLayers(),showExplainer(),map.addLayer($percentCondoLayer)}function buildCrimeMap(){var e=["#fee0d2","#fc9272","#de2d26"]
$(".income-button").attr("disabled","disabled"),$(".crime-select").addClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$(".key-holder").css("display","block"),$(".legend-block").remove(),$(".housing-type").html("Crime rates ").css({color:"#a50f15","font-weight":"bold"}),$(".housing-explainer").html(" for ZIP codes you can afford."),$(".percent-year").css("display","none"),$(".label-left").html("Low").css({width:"33%","text-align":"left"}),$(".label-middle").html("Average").css({display:"inline-block",width:"33%"}),$(".label-right").html("High").css({width:"33%","text-align":"right"}),$(".d-grade").css("display","none"),$(".b-grade").css("display","none"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
for(var o=0;o<e.length;o++)$(".key").append("<div class='legend-block' style='border-color:"+e[o]+"'</div>")
$(".legend-block").css("width","33%"),clearAllLayers(),map.addLayer($crimeLayer)}function buildSchoolMap(){var e=["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"]
$(".income-button").attr("disabled","disabled"),$(".crime-select").removeClass("selected-interface"),$(".price-select").removeClass("selected-interface"),$(".percent-select").removeClass("selected-interface"),$(".school-select").addClass("selected-interface"),$(".key-holder").css("display","block"),$(".legend-block").remove(),$(".housing-type").html("Average school grade ").css({color:"#54278f","font-weight":"bold"}),$(".housing-explainer").html(" for ZIP codes you can afford."),$(".percent-year").css("display","none"),$(".label-left").css({width:"20%","text-align":"center"}).html("A"),$(".b-grade").css({width:"20%",display:"inline-block"}).html("B"),$(".label-middle").css({width:"20%",display:"inline-block"}).html("C"),$(".d-grade").css({width:"20%",display:"inline-block"}).html("D"),$(".label-right").css({width:"20%","text-align":"center"}).html("F"),$("#interface-container").slideDown("400"),$("#map-info").css("bottom","26%")
for(var o=0;o<e.length;o++)$(".key").append("<div class='legend-block' style='border-color:"+e[o]+"'</div>")
clearAllLayers(),map.addLayer($schoolLayer)}var income,$zipData,$houseLayer=null,$condoLayer=null,$percentHouseLayer=null,$percentCondoLayer=null,$crimeLayer=null,$schoolLayer=null,$defaultLayer=null,$defaultHouseLayer=null,$defaultCondoLayer=null,$defaultPercentHouseLayer=null,$defaultPercentCondoLayer=null,$defaultCrimeLayer=null,$defaultSchoolLayer=null,tiles=new L.StamenTileLayer("toner-lite"),mobile=843,w=window.innerWidth,coordinates=fixPosition(),lat=coordinates[0],lon=coordinates[1],map=new L.Map("map-container",{center:new L.LatLng(lat,lon),zoom:fixZoom(),minZoom:7,maxZoom:16,zoomControl:!1,doubleClickZoom:!1,VML:!0,scrollWheelZoom:controlZoom()}).addLayer(tiles),control=L.control.zoom({position:"topleft"})
control.addTo(map)
var $defaultLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultLayerColor}),$defaultHouseLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultHouseStyle})
map.addLayer($defaultHouseLayer)
var $defaultCondoLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultCondoStyle}),$defaultPercentHouseLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultHousePercentStyle}),$defaultPercentCondoLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultCondoPercentStyle}),$defaultCrimeLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultCrimeStyle}),$defaultSchoolLayer=L.geoJson($zipData,{onEachFeature:onEachFeature,style:defaultSchoolStyle})
